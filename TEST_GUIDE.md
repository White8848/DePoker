# ğŸ§ª DePoker åŒºå—é“¾åŠŸèƒ½æµ‹è¯•æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³• 1: PowerShell è„šæœ¬ï¼ˆæ¨èï¼‰

```powershell
.\start-blockchain.ps1
```

**è‡ªåŠ¨å®Œæˆï¼š**
- âœ… å¯åŠ¨ Hardhat èŠ‚ç‚¹ï¼ˆç»ˆç«¯ 1ï¼‰
- âœ… éƒ¨ç½²æ™ºèƒ½åˆçº¦ï¼ˆç»ˆç«¯ 2ï¼‰
- âœ… å¯åŠ¨ Expo åº”ç”¨ï¼ˆç»ˆç«¯ 3ï¼‰

### æ–¹æ³• 2: æ‰¹å¤„ç†è„šæœ¬ï¼ˆç®€åŒ–ï¼‰

```cmd
start-dev.bat
```

åŒå‡»è¿è¡Œå³å¯ï¼

---

## ğŸ“‹ æµ‹è¯•æµç¨‹

### âœ… æ­¥éª¤ 1: å¯åŠ¨æœåŠ¡

è¿è¡Œå¯åŠ¨è„šæœ¬åï¼Œä½ å°†çœ‹åˆ° **3 ä¸ªç»ˆç«¯çª—å£**ï¼š

**ç»ˆç«¯ 1 - Hardhat èŠ‚ç‚¹**
```
ğŸ”— Hardhat æœ¬åœ°åŒºå—é“¾èŠ‚ç‚¹
RPC: http://127.0.0.1:8545
Chain ID: 31337

Account #0: 0xf39Fd6...2266 (10000 ETH)
Account #1: 0x709979...79C8 (10000 ETH)
...
```

**ç»ˆç«¯ 2 - åˆçº¦éƒ¨ç½²**
```
ğŸ“œ æ™ºèƒ½åˆçº¦éƒ¨ç½²

DePoker2 deployed to: 0x5FbDB2315678afecb367f032d93F642f64180aa3
Saved deployment info to deployments/localhost-DePoker2.json

âœ… éƒ¨ç½²å®Œæˆï¼
```

**ç»ˆç«¯ 3 - Expo åº”ç”¨**
```
ğŸ“± React Native åº”ç”¨

Metro waiting on exp://192.168.x.x:8081
â€º Press w â”‚ open web
â€º Press a â”‚ open Android
â€º Press i â”‚ open iOS simulator
```

---

### âœ… æ­¥éª¤ 2: å¤åˆ¶åˆçº¦åœ°å€

ä» **ç»ˆç«¯ 2** å¤åˆ¶åˆçº¦åœ°å€ï¼Œä¾‹å¦‚ï¼š
```
0x5FbDB2315678afecb367f032d93F642f64180aa3
```

æ‰“å¼€ `blockchain/config/contract.ts`ï¼Œæ›´æ–°åœ°å€ï¼š

```typescript
export const contractAddress = '0x5FbDB2315678afecb367f032d93F642f64180aa3'; // ğŸ‘ˆ ç²˜è´´è¿™é‡Œ
export const rpcUrl = 'http://127.0.0.1:8545';
export const chainId = 31337;
```

---

### âœ… æ­¥éª¤ 3: å¯åŠ¨åº”ç”¨

åœ¨ **ç»ˆç«¯ 3ï¼ˆExpoï¼‰** ä¸­ï¼š

- æŒ‰ `w` â†’ åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼ˆWeb æµ‹è¯•ï¼‰
- æŒ‰ `a` â†’ åœ¨ Android æ¨¡æ‹Ÿå™¨/è®¾å¤‡ä¸­æ‰“å¼€
- æŒ‰ `i` â†’ åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€ï¼ˆéœ€è¦ Macï¼‰

---

### âœ… æ­¥éª¤ 4: æµ‹è¯•åŒºå—é“¾åŠŸèƒ½

#### 4.1 åˆ›å»ºåŒºå—é“¾æˆ¿é—´

1. åœ¨åº”ç”¨ä¸­ç‚¹å‡» **"Create New Room"**
2. å¡«å†™æˆ¿é—´ä¿¡æ¯ï¼š
   - Room Name: `Blockchain Test`
   - Buy-in Unit: `1000`
   - Blinds: `1` / `2`
3. **å¼€å¯ "Enable Blockchain" å¼€å…³** â­â­â­
4. ç‚¹å‡» **"Create Room"**

**é¢„æœŸç»“æœï¼š**
```
âœ… Room created on blockchain!
Room ID: 0
Stack: $1000
Blinds: $1/2
Min Reputation: -3
```

**æ£€æŸ¥ç»ˆç«¯ 1ï¼ˆHardhatï¼‰ï¼š**
```
eth_sendTransaction
  Contract deployment: DePoker2
  From: 0xf39fd6...
  Value: 0 ETH
  Gas used: XXXXX
```

#### 4.2 æ·»åŠ ç©å®¶

1. ç‚¹å‡» **"Add Player"**
2. è¾“å…¥ï¼š
   - Name: `Alice`
   - Amount: `1000`
3. ç‚¹å‡» **"Add Player"**

**é¢„æœŸç»“æœï¼š**
```
âœ… Player added to blockchain!
Address: 0xf39F...2266
Reputation: 0
```

4. é‡å¤æ·»åŠ ç¬¬äºŒä¸ªç©å®¶ï¼š
   - Name: `Bob`
   - Amount: `1000`

**é¢„æœŸç»“æœï¼š**
```
âœ… Player added to blockchain!
Address: 0x7099...79C8  ğŸ‘ˆ æ³¨æ„åœ°å€ä¸åŒ
Reputation: 0
```

**æ£€æŸ¥ç»ˆç«¯ 1ï¼ˆHardhatï¼‰ï¼š**
```
eth_sendTransaction
  Contract call: joinRoom
  From: 0xf39fd6...
  To: 0x5fbdb2... (DePoker2)
```

#### 4.3 å¼€å§‹æ¸¸æˆ

1. ç‚¹å‡» **"Start Game"**
2. ç‚¹å‡» **"Start New Round"**

**é¢„æœŸç»“æœï¼š**
- æ§åˆ¶å°æ˜¾ç¤ºï¼š`ğŸ”— Starting blockchain room 0...`
- æ§åˆ¶å°æ˜¾ç¤ºï¼š`âœ… Blockchain room started`
- ç•Œé¢åˆ‡æ¢åˆ° **BlockchainGamePlay** ç»„ä»¶
- æ˜¾ç¤º ğŸ”— åŒºå—é“¾å›¾æ ‡
- æŒ‰é’®æ–‡å­—ï¼š**"End Round & Vote on Chain"**

**æ£€æŸ¥ç»ˆç«¯ 1ï¼ˆHardhatï¼‰ï¼š**
```
eth_sendTransaction
  Contract call: startRoom
  From: 0xf39fd6...
```

#### 4.4 æ¸¸æˆæµç¨‹

1. å½“å‰ç©å®¶å¯ä»¥é€‰æ‹©ï¼š
   - **Fold** - å¼ƒç‰Œ
   - **Check** - è¿‡ç‰Œï¼ˆå¦‚æœä¸‹æ³¨ç›¸åŒï¼‰
   - **Call** - è·Ÿæ³¨
   - **Raise** - åŠ æ³¨
   - **All-In** - å…¨ä¸‹

2. è½®æµæ“ä½œç›´åˆ°å†³å‡ºèƒœè´Ÿ

3. ç‚¹å‡» **"End Round & Vote on Chain"**

**Web æµè§ˆå™¨ï¼š**
- å¼¹å‡º Modal é€‰æ‹©èµ¢å®¶
- æ˜¾ç¤ºæ‰€æœ‰æ´»è·ƒç©å®¶å’Œç­¹ç 
- æ”¯æŒå•ç‹¬é€‰æ‹©æˆ–å¹³åˆ†å¥–æ± 

**ç§»åŠ¨ç«¯ï¼š**
- å¼¹å‡º Alert é€‰æ‹©èµ¢å®¶
- æ˜¾ç¤ºç©å®¶åˆ—è¡¨

4. é€‰æ‹©èµ¢å®¶åï¼š
   - æŠ•ç¥¨ä¸Šé“¾
   - è‡ªåŠ¨ç»“ç®—
   - æ›´æ–°å£°èª‰

**é¢„æœŸç»“æœï¼š**
```
âœ… Round finalized on blockchain!
```

---

## ğŸ” è°ƒè¯•æ£€æŸ¥ç‚¹

### æ£€æŸ¥ç‚¹ 1: èŠ‚ç‚¹è¿è¡Œ
```bash
# åœ¨æµè§ˆå™¨æ‰“å¼€
http://127.0.0.1:8545
```
åº”è¯¥æ˜¾ç¤ºé”™è¯¯ï¼ˆå› ä¸ºæ˜¯ JSON-RPC ç«¯ç‚¹ï¼‰ï¼Œä½†ä¸åº”è¯¥æ‹’ç»è¿æ¥ã€‚

### æ£€æŸ¥ç‚¹ 2: åˆçº¦éƒ¨ç½²
```bash
# æ£€æŸ¥éƒ¨ç½²æ–‡ä»¶
cat DePoker/deployments/localhost-DePoker2.json
```
åº”è¯¥æ˜¾ç¤ºï¼š
```json
{
  "address": "0x5FbDB...",
  "network": "localhost"
}
```

### æ£€æŸ¥ç‚¹ 3: æ§åˆ¶å°æ—¥å¿—

**åº”ç”¨å¯åŠ¨æ—¶ï¼š**
```
ğŸ“ Loaded 6 test accounts
```

**åˆ›å»ºæˆ¿é—´æ—¶ï¼š**
```
ğŸ”— Creating room on blockchain...
âœ… Blockchain room created: 0
```

**æ·»åŠ ç©å®¶æ—¶ï¼š**
```
ğŸ”— Adding player Alice to blockchain room 0...
   Address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
   Reputation: 0
âœ… Player joined blockchain room
```

**å¼€å§‹æ¸¸æˆæ—¶ï¼š**
```
ğŸ”— Starting blockchain room 0...
âœ… Blockchain room started
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1: "Cannot connect to blockchain"

**åŸå› ï¼š** Hardhat èŠ‚ç‚¹æœªè¿è¡Œ

**è§£å†³ï¼š**
1. æ£€æŸ¥ç»ˆç«¯ 1 æ˜¯å¦æ˜¾ç¤ºèŠ‚ç‚¹æ—¥å¿—
2. å¦‚æœèŠ‚ç‚¹å´©æºƒï¼Œé‡æ–°è¿è¡Œ `.\start-blockchain.ps1`

### é—®é¢˜ 2: "Room creation failed"

**åŸå› ï¼š** åˆçº¦åœ°å€æœªæ›´æ–°æˆ–é”™è¯¯

**è§£å†³ï¼š**
1. æ£€æŸ¥ `blockchain/config/contract.ts` ä¸­çš„åœ°å€
2. ç¡®ä¿åœ°å€ä¸ç»ˆç«¯ 2 æ˜¾ç¤ºçš„ä¸€è‡´
3. é‡å¯åº”ç”¨ï¼ˆåœ¨ Expo ç»ˆç«¯æŒ‰ `r`ï¼‰

### é—®é¢˜ 3: "Player cannot join room"

**åŸå› ï¼š** 
- æµ‹è¯•è´¦æˆ·ä¸è¶³
- å£°èª‰ä¸æ»¡è¶³ï¼ˆ< -3ï¼‰

**è§£å†³ï¼š**
1. æœ€å¤šæ·»åŠ  6 ä¸ªç©å®¶ï¼ˆHardhat é»˜è®¤è´¦æˆ·ï¼‰
2. é‡å¯ Hardhat èŠ‚ç‚¹é‡ç½®å£°èª‰

### é—®é¢˜ 4: Web æµè§ˆå™¨æŒ‰é’®æ— å“åº”

**å·²ä¿®å¤ï¼š** ä½¿ç”¨ Modal æ›¿ä»£ Alert.alert

**éªŒè¯ï¼š**
- ç‚¹å‡» "End Round" åº”è¯¥å¼¹å‡º Modal
- Modal æ˜¾ç¤ºç©å®¶åˆ—è¡¨
- å¯ä»¥é€‰æ‹©èµ¢å®¶æˆ–å¹³åˆ†

### é—®é¢˜ 5: èŠ‚ç‚¹é¢‘ç¹å´©æºƒ

**åŸå› ï¼š** å¤šæ¬¡å¯åŠ¨å¯¼è‡´ç«¯å£å ç”¨

**è§£å†³ï¼š**
```powershell
# æ€æ­»æ‰€æœ‰ node è¿›ç¨‹
taskkill /F /IM node.exe

# ç­‰å¾… 2 ç§’
Start-Sleep -Seconds 2

# é‡æ–°å¯åŠ¨
.\start-blockchain.ps1
```

---

## ğŸ“Š æµ‹è¯•éªŒæ”¶æ¸…å•

å®Œæ•´æµ‹è¯•åï¼Œè¯·å‹¾é€‰ä»¥ä¸‹é¡¹ç›®ï¼š

### åŸºç¡€åŠŸèƒ½
- [ ] å¯åŠ¨è„šæœ¬æˆåŠŸæ‰“å¼€ 3 ä¸ªç»ˆç«¯
- [ ] Hardhat èŠ‚ç‚¹æ­£å¸¸è¿è¡Œ
- [ ] åˆçº¦æˆåŠŸéƒ¨ç½²
- [ ] Expo åº”ç”¨æ­£å¸¸å¯åŠ¨

### åŒºå—é“¾é›†æˆ
- [ ] åˆ›å»ºå¯ç”¨åŒºå—é“¾çš„æˆ¿é—´æˆåŠŸ
- [ ] æ˜¾ç¤ºåŒºå—é“¾æˆ¿é—´ ID
- [ ] æ·»åŠ ç©å®¶æ˜¾ç¤ºæ­£ç¡®åœ°å€
- [ ] æ˜¾ç¤ºç©å®¶å£°èª‰åˆ†æ•°
- [ ] æ¸¸æˆå¯åŠ¨è°ƒç”¨ startRoom
- [ ] BlockchainGamePlay ç»„ä»¶æ­£ç¡®åŠ è½½

### UI/UX
- [ ] Web æµè§ˆå™¨ Modal æ­£å¸¸å·¥ä½œ
- [ ] ç§»åŠ¨ç«¯ Alert æ­£å¸¸å·¥ä½œ
- [ ] åŒºå—é“¾å›¾æ ‡æ­£ç¡®æ˜¾ç¤º
- [ ] æŒ‰é’®æ–‡å­—åŒºåˆ†ï¼ˆ"Vote on Chain" vs "Award Pot"ï¼‰
- [ ] åŠ è½½çŠ¶æ€æœ‰æç¤º
- [ ] é”™è¯¯æœ‰å‹å¥½æç¤º

### æ—¥å¿—éªŒè¯
- [ ] æ§åˆ¶å°æ˜¾ç¤ºæµ‹è¯•è´¦æˆ·æ•°é‡
- [ ] æ§åˆ¶å°æ˜¾ç¤ºåŒºå—é“¾æ“ä½œæ—¥å¿—
- [ ] Hardhat ç»ˆç«¯æ˜¾ç¤ºäº¤æ˜“è®°å½•
- [ ] æ—  TypeScript ç¼–è¯‘é”™è¯¯

### é™çº§æœºåˆ¶
- [ ] åŒºå—é“¾å¤±è´¥æ—¶é™çº§åˆ°æœ¬åœ°æ¨¡å¼
- [ ] æ˜¾ç¤ºé”™è¯¯æç¤º
- [ ] æœ¬åœ°æ¨¡å¼ä»å¯æ­£å¸¸æ¸¸æˆ

---

## ğŸ¯ ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼š

1. **å®ç°å®Œæ•´æŠ•ç¥¨æµç¨‹**
   - å¤šç©å®¶æŠ•ç¥¨
   - ç¥¨æ•°ç»Ÿè®¡
   - è‡ªåŠ¨ finalize

2. **ä¼˜åŒ– UI**
   - æ·»åŠ åŠ è½½åŠ¨ç”»
   - æ˜¾ç¤ºäº¤æ˜“çŠ¶æ€
   - æ˜¾ç¤ºäº¤æ˜“å“ˆå¸Œ

3. **å¢å¼ºåŠŸèƒ½**
   - å£°èª‰æ’è¡Œæ¦œ
   - å†å²è®°å½•æŸ¥è¯¢
   - å¤šæˆ¿é—´ç®¡ç†

4. **ç”Ÿäº§éƒ¨ç½²**
   - é›†æˆ MetaMask
   - éƒ¨ç½²åˆ°æµ‹è¯•ç½‘
   - å®‰å…¨å®¡è®¡

---

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ

1. æŸ¥çœ‹ [BLOCKCHAIN_INTEGRATION_GUIDE.md](./BLOCKCHAIN_INTEGRATION_GUIDE.md)
2. æ£€æŸ¥ [BLOCKCHAIN_CHECKLIST.md](./BLOCKCHAIN_CHECKLIST.md)
3. æŸ¥çœ‹ Hardhat èŠ‚ç‚¹æ—¥å¿—
4. æŸ¥çœ‹åº”ç”¨æ§åˆ¶å°æ—¥å¿—

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰
