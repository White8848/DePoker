# DePoker UI 设计文档

## 应用概述
DePoker是一个基于区块链技术的德州扑克记账应用，用于记录游戏过程中的筹码变化，确保数据的透明性和不可篡改性。

## 核心功能
1. ✅ 创建游戏房间
2. ✅ 玩家买入
3. ✅ 记录每轮盈亏
4. ✅ 游戏结算与转账指引
5. ✅ 区块链验证

## 界面设计

### 1. 房间列表页面 (主页)
**功能：** 展示所有游戏房间，支持创建新房间

**UI元素：**
- 标题："德扑记账"
- 副标题："区块链验证 · 安全可信"
- 创建新房间按钮（蓝色，带加号图标）
- 房间列表卡片：
  - 房间名称
  - 状态标签（等待中/进行中/已结束）
  - 玩家人数
  - 创建时间
  - 区块链验证徽章

**颜色方案：**
- 进行中：绿色 (#4CAF50)
- 等待中：黄色 (#FFC107)
- 已结束：灰色 (#9E9E9E)
- 主色调：蓝色 (#2196F3)

---

### 2. 创建房间页面
**功能：** 设置新游戏房间的参数

**UI元素：**
- 返回按钮
- 标题："创建新房间"
- 表单字段：
  - 房间名称输入框（必填）
  - 初始筹码输入框（仅用于记账）
  - 提示文字："此金额仅用于记账，不涉及实际货币"
- 区块链信息提示卡（浅蓝色背景）
- 创建按钮（蓝色，带图标）

**验证：**
- 房间名称不能为空
- 创建成功后显示"房间已创建并上链"提示

---

### 3. 玩家买入页面
**功能：** 玩家加入游戏并记录买入金额

**UI元素：**
- 返回按钮
- 房间信息卡片（白色卡片）
  - 房间名称
  - 当前玩家数
- 表单字段：
  - 玩家昵称输入框
  - 买入金额输入框（数字键盘）
  - 提示："实际转账请在游戏结束后根据指引进行"
- 已加入玩家列表预览
  - 玩家头像图标
  - 昵称
  - 买入金额
- 确认买入按钮（蓝色）
- 开始游戏按钮（绿色边框，至少2人后显示）

**交互：**
- 每次买入后清空输入框
- 显示"买入记录已上链验证"提示
- 至少2名玩家才能开始游戏

---

### 4. 游戏进行页面
**功能：** 实时显示游戏状态和玩家筹码

**UI元素：**

**顶部栏：**
- 返回按钮
- 房间名称
- 当前轮数
- 结算按钮（绿色，计算器图标）

**统计卡片（三列）：**
- 总买入金额
- 玩家数量
- 已完成轮数

**玩家列表（滚动）：**
每个玩家卡片显示：
- 排名圆圈（蓝色背景）
- 玩家昵称
- 买入金额（灰色小字）
- 当前筹码（大号字体）
- 盈亏金额（绿色/红色）

**底部操作区：**
- "记录本轮盈亏"按钮（绿色，带加号图标）
- 区块链验证状态（"所有交易已通过区块链验证"）

**数据展示：**
- 盈利用绿色显示，带"+"号
- 亏损用红色显示，带"-"号
- 平局不显示符号

---

### 5. 结算页面
**功能：** 显示最终结果和转账指引

**UI元素：**

**顶部总结卡片：**
- 奖杯图标（金色）
- "游戏结束"标题
- "区块链验证完成"副标题

**最终结算列表：**
每个玩家卡片包含：
- 玩家昵称
- 状态徽章（赢家/需支付/平局）
- 买入金额
- 最终筹码
- 盈亏金额（绿色/红色，加粗显示）

**转账指引区（橙色背景卡片）：**
- 箭头图标
- 清晰列出每个输家需要支付给赢家的具体金额
- 格式："[输家] 需支付 → 给 [赢家]: ¥金额"

**完成按钮：**
- 蓝色大按钮："完成结算"
- 点击后确认对话框，返回房间列表

**计算逻辑：**
- 赢家按盈利比例分配输家的支付金额
- 确保总金额平衡

---

## 设计原则

### 1. 区块链可信度展示
- 在关键位置显示区块链验证徽章
- 使用盾牌和对勾图标增强信任感
- 在每次关键操作后提示"已上链"

### 2. 色彩系统
- **主色：** 蓝色 (#2196F3) - 专业、可信
- **成功：** 绿色 (#4CAF50) - 盈利、验证成功
- **警告：** 黄色 (#FFC107) - 等待状态
- **危险：** 红色 (#F44336) - 亏损、需支付
- **金色：** (#FFD700) - 奖杯、赢家

### 3. 用户体验
- 清晰的视觉层级
- 明确的操作反馈
- 输入验证和提示
- 关键操作需要确认
- 平滑的页面切换

### 4. 数据准确性
- 实时更新筹码数据
- 多人验证机制（待实现完整功能）
- 区块链记录所有交易
- 结算时自动计算转账金额

### 5. 移动优先
- 触控友好的按钮尺寸
- 滚动列表查看长内容
- 数字键盘输入金额
- 响应式卡片布局

---

## 技术栈
- **框架：** React Native (Expo)
- **路由：** Expo Router
- **图标：** @expo/vector-icons (Ionicons)
- **区块链：** 待集成（建议使用 Ethereum 或 Polygon）

---

## 下一步开发计划

### 阶段 1：完善UI功能 ✅
- [x] 房间列表页面
- [x] 创建房间页面
- [x] 买入页面
- [x] 游戏进行页面
- [x] 结算页面

### 阶段 2：实现核心逻辑
- [ ] 记录每轮盈亏的详细界面
- [ ] 多人验证机制（投票/签名）
- [ ] 实时数据同步
- [ ] 本地数据持久化

### 阶段 3：区块链集成
- [ ] 连接区块链网络
- [ ] 智能合约开发
  - 房间创建合约
  - 买入记录合约
  - 盈亏记录合约
  - 结算验证合约
- [ ] 钱包集成（MetaMask / WalletConnect）
- [ ] 交易签名和验证

### 阶段 4：优化和测试
- [ ] 性能优化
- [ ] 错误处理
- [ ] 网络断连处理
- [ ] 安全审计
- [ ] 用户测试

---

## 使用说明

### 运行应用
```bash
npm start
```

### 基本流程
1. 打开应用，查看房间列表
2. 点击"创建新房间"
3. 输入房间名称和初始筹码
4. 玩家依次买入
5. 开始游戏，记录每轮盈亏
6. 游戏结束，查看结算和转账指引

---

## 截图位置
UI 界面已在 `app/(tabs)/poker.tsx` 中实现，包含：
- 5个完整的页面视图
- 响应式布局
- 完整的样式定义
- 基础的状态管理

---

## 备注
- 当前版本为UI原型，区块链功能需要后续集成
- 数据暂时存储在组件状态中，未持久化
- 建议使用测试网络进行区块链测试
- 实际转账功能需要集成支付接口或钱包

---

**设计完成日期：** 2025年11月18日
**设计师：** GitHub Copilot
**版本：** 1.0
